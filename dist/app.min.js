!function(e){"use strict";e.module("cenkce.utils",["ng"]);e.module("cenkce.utils").service("utils.sharer",t),t.$inject=["$q"];function t(e){var t=e;this.fbfeed=function(e,o,n,r){var i=t.defer();return FB.ui({method:"feed",link:r,picture:n,description:o,caption:e},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},this.fbshare=function(e){var o=t.defer();return FB.ui({method:"share",href:e},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},this.twshare=function(e,t){var o="http://twitter.com/home?status="+e+" "+t,n=window.open(o,"","height=600,width=800,resizable=true,scrollbars=yes,toolbar=no,menubar=no,location=no");window.focus&&n.focus()}}e.module("cenkce.utils").factory("utils.baseController",o),o.$inject=["$scope"];function o(e){var t=[];e.$on("$destroy",function(){for(var e in t)t[e].call()}),this.$on=function(e,o,n){t.push(e.$on(o,n))},this.$watch=function(e,o,n){t.push(e.$watch(o,n))}}r.$inject=["cenkce.imageFileReader","$rootScope","$window","$q"];var n={imageLoaded:"cropper:image-loaded",imageSelected:"cropper:image-selected",EXIFFetched:"cropper:exif-fetched",completed:"cropper:completed",cropped:"cropper:cropped"};function r(t,o,r,i){var c=r.cropper,a=!1,u={dragMode:"move",scalable:!1,aspectRatio:1,restore:!1,minCropBoxWidth:230,checkOrientation:!1,guides:!1,toggleDragModeOnDblclick:!1,center:!1,highlight:!1,cropBoxMovable:!1,cropBoxResizable:!1},s=new Image,d=e.element("<div></div>");if("undefined"==typeof Cropper)throw new Error("Croppperjs is not found.");function p(e){a=e}this.getElement=function(){return d},this.setConfig=function(t){u=e.copy(t)},this.getConfig=function(){e.copy(u)},this.exportData=function(){if(c){var e=";base64,",t={},o=new Image,n=c.getCroppedCanvas({width:w,height:h});return t.url=n.toDataURL("image/jpeg",1),o.src=t.url,t.url?(t.idx=t.url.indexOf(e),t.idx>=0&&(t.base64=t.url.substring(t.idx+e.length)),t.fileName=l()+".jpg",t):!1}};function f(e){var t=document.createElement("canvas");t.width=e.naturalWidth,t.height=e.naturalHeight;var o=t.getContext("2d");return o.drawImage(e,0,0),t.toDataURL()}this.zoomTo=function(e){c&&c.zoomTo(e)},this.rotate=function(e){c&&c.rotate(e)},this.getCropper=function(){return c},this.load=function(e){p(!0);var o=i.defer();if(u.cropend=function(e,t){},e.length>1)throw new Error("Multi-files are not supported");if(void 0===r.EXIF)throw new Error("exif-js cannot be found.");return t.read(e).then(function(t){if(!t[0].url)throw new Error("File data is not readable");var r=new Image;r.src=t[0].url,r.onload=function(){p(!1),s.src=f(r),s.onload=function(){console.log("completed"),d.append(s),c=new Cropper(s,{dragMode:"move",scalable:!1,aspectRatio:1,restore:!1,minCropBoxWidth:200,minCropBoxHeight:200,checkOrientation:!1,guides:!1,toggleDragModeOnDblclick:!1,center:!1,highlight:!1,cropBoxMovable:!1,cropBoxResizable:!1,cropend:function(e,t){}}),EXIF.getData(e[0],function(){switch(o.notify({message:n.EXIFFetched}),this.exifdata.Orientation){case 8:c.rotate(-90);break;case 3:c.rotate(180);break;case 6:c.rotate(90)}o.resolve()})}}}),o.promise}}i.$inject=["cenkce.cropperApp"];function i(t){var o;return{restrict:"A",controller:["$scope",function(e){e.cropper={},e.cropper.zoomTo=0,e.zoom=0,e.$watch("zoom",function(e,o){console.log("zoom"),e&&t.zoomTo(e)}),e.exportCroppedData=function(e,o){t.exportData()},e.fileBrowse=function(){console.log("browse"),o[0].click()}}],controllerAs:"cropperCtrl",scope:!0,link:function(r,i,c){o=i.find("input[type=file]"),0==o.length&&(o=e.element("<input type='file' style=\"display: none;\" >"),i.append(o)),o.bind("change",function(e){r.addPreview(t.getElement()),t.load(e.target.files).then(function(e){console.log("resolved")},function(e){},function(e){console.log(e),e.message==n.imageLoaded?e.complete():e.message==n.completed})}),r.$on("$destroy",function(){o.unbind("change"),o=null})}}}function c(){return{requie:"?cropper",restrict:"A",link:function(e,t,o){e.addPreview=function(e){t.html(""),t.append(e)}}}}e.module("cenkce.utils").service("cenkce.cropperApp",r),e.module("cenkce.utils").directive("cropper",i),e.module("cenkce.utils").directive("cropperPreview",c),e.module("cenkce.utils").service("cenkce.ga",a),a.$inject=["$window"];function a(e){var t=e.ga;this.page=function(e){t("send",{hitType:"pageview",page:e})},this.event=function(e,o,n){t("send",{hitType:"event",eventCategory:e,eventAction:o,eventLabel:n})}}e.module("cenkce.utils").service("cenkce.generateUUID",l);function l(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)});return t}u.$inject=["$q"];function u(e){var t=e;this.read=function(e){for(var o,n=new FileReader,r=";base64,",i=[],c=0;o=e[c];c++){if(!o.type.match("image.*"))throw new Error("file must be image");var a=t.defer();i.push(a.promise),function(e,t){n.onload=function(o){var i={};n.readyState==FileReader.DONE&&(i.url=o.target.result,i.idx=i.url.indexOf(r),i.idx>=0&&(i.base64=i.url.substring(i.idx+r.length)),i.fileName=t.name),e.resolve(i)}}(a,o),n.readAsDataURL(o)}return t.all(i)}}e.module("cenkce.utils").service("cenkce.imageFileReader",u)}(window.angular);
//# sourceMappingURL=app.min.js.map
