!function(e){"use strict";e.module("cenkce.utils",["ng"]);e.module("cenkce.utils").service("cenkce.utils.sharer",t),t.$inject=["$q"];function t(e){var t=e;this.fbfeed=function(e,n,r,o){var i=t.defer();return FB.ui({method:"feed",link:o,picture:r,description:n,caption:e},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},this.fbshare=function(e){var n=t.defer();return FB.ui({method:"share",href:e},function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},this.twshare=function(e,t){var n="http://twitter.com/home?status="+e+" "+t,r=window.open(n,"","height=600,width=800,resizable=true,scrollbars=yes,toolbar=no,menubar=no,location=no");window.focus&&r.focus()}}e.module("cenkce.utils").factory("cenkce.utils.baseController",n),n.$inject=["$scope"];function n(e){var t=[],n=this;e.$on("$destroy",function(){n.clearEventHandlers()}),this.clearEventHandlers=function(){for(var e in t)t[e].call()},this.unbindAll=function(){for(;t.length>0;)t.shilt()()},this.$on=function(e,n,r){t.push(e.$on(n,r))},this.$watch=function(e,n,r){t.push(e.$watch(n,r))}}o.$inject=["cenkce.utils.imageFileReader","$rootScope","$window","$q"];var r={imageLoaded:"cropper:image-loaded",imageSelected:"cropper:image-selected",EXIFFetched:"cropper:exif-fetched",completed:"cropper:completed",cropped:"cropper:cropped"};function o(t,n,r,o){var i=this,c=r.cropper,a=!1,u={dragMode:"move",scalable:!1,aspectRatio:1,restore:!1,minCropBoxWidth:230,checkOrientation:!1,guides:!1,toggleDragModeOnDblclick:!1,center:!1,highlight:!1,cropBoxMovable:!1,cropBoxResizable:!1},s=new Image,l=e.element("<div></div>");if("undefined"==typeof Cropper)throw new Error("Croppperjs is not found.");function d(e){a=e}function f(e){d(!0);var t=o.defer(),n=new Image;return n.src=e,n.onload=function(){if(void 0===r.EXIF)throw new Error("exif-js cannot be found.");s.src=i.drawImage(n),s.onload=function(){l.append(s),c=new Cropper(s,u),d(!1),i.autoRotate(this.src),t.resolve("cenkce")}},t.promise}this.getImage=function(){var e=new Image;return e.src=s.src,e},this.autoRotate=function(e){EXIF.getData(e,function(){switch(this.exifdata.Orientation){case 8:c.rotate(-90);break;case 3:c.rotate(180);break;case 6:c.rotate(90)}})},this.getElement=function(){return l},this.setConfig=function(t){u=e.copy(t)},this.getConfig=function(){e.copy(u)},this.exportData=function(e,t){if(c){var n=";base64,",r={},o=new Image,i=c.getCroppedCanvas({width:e,height:t});return r.url=i.toDataURL("image/jpeg",1),o.src=r.url,r.url?(r.idx=r.url.indexOf(n),r.idx>=0&&(r.base64=r.url.substring(r.idx+n.length)),r):!1}},this.drawImage=function(e){var t=document.createElement("canvas");t.width=e.naturalWidth,t.height=e.naturalHeight;var n=t.getContext("2d");return n.drawImage(e,0,0),t.toDataURL()},this.zoomTo=function(e){c&&c.zoomTo(e)},this.rotate=function(e){c&&c.rotate(e)},this.getCropper=function(){return c},this.loadFromFileObject=function(e){var n=o.defer();if(u.cropend=function(e,t){},e.length>1)throw new Error("Multi-files are not supported");return t.read(e).then(function(e){e[0].url||n.reject("File data is not readable"),f(e[0].url).then(function(e){n.resolve(e)},function(e){n.reject(e)},function(e){n.notify(e)})}),n.promise},this.loadFromUrl=function(e){u.cropend=function(e,t){};var t=f(e).then(function(e){return e},function(e){return e},function(e){return e});return t}}i.$inject=["cenkce.utils.cropperApp"];function i(t){var n;return{restrict:"A",controller:["$scope",function(e){e.cropper={},e.cropper.zoomTo=0,e.zoom=0,e.$watch("zoom",function(e,n){e&&t.zoomTo(e)}),e.$parent.exportCroppedData=function(e,n){return t.exportData(e,n)},e.$parent.fileBrowse=function(){n[0].click()}}],controllerAs:"cropperCtrl",scope:!0,link:function(o,i,c){n=i.find("input[type=file]"),0==n.length&&(n=e.element("<input type='file' style=\"display: none;\" >"),i.append(n)),n.bind("change",function(e){o.addPreview(t.getElement()),t.loadFromFileObject(e.target.files).then(function(e){},function(e){},function(e){e.message==r.imageLoaded||e.message==r.completed})}),o.$on("$destroy",function(){n.unbind("change"),n=null})}}}function c(){return{requie:"?cropper",restrict:"A",link:function(e,t,n){e.addPreview=function(e){t.html(""),t.append(e)}}}}e.module("cenkce.utils").service("cenkce.utils.cropperApp",o),e.module("cenkce.utils").directive("cropper",i),e.module("cenkce.utils").directive("cropperPreview",c),e.module("cenkce.utils").service("cenkce.uitls.ga",a),a.$inject=["$window"];function a(e){var t=e.ga;this.page=function(e){t("send",{hitType:"pageview",page:e})},this.event=function(e,n,r){t("send",{hitType:"event",eventCategory:e,eventAction:n,eventLabel:r})}}e.module("cenkce.utils").service("cenkce.utils.generateUUID",u);function u(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)});return t}s.$inject=["$q"];function s(e){var t=e;this.read=function(e){for(var n,r=new FileReader,o=";base64,",i=[],c=0;n=e[c];c++){if(!n.type.match("image.*"))throw new Error("file must be image");var a=t.defer();i.push(a.promise),function(e,t){r.onload=function(n){var i={};r.readyState==FileReader.DONE&&(i.url=n.target.result,i.idx=i.url.indexOf(o),i.idx>=0&&(i.base64=i.url.substring(i.idx+o.length)),i.fileName=t.name),e.resolve(i)}}(a,n),r.readAsDataURL(n)}return t.all(i)}}e.module("cenkce.utils").service("cenkce.utils.imageFileReader",s)}(window.angular);
//# sourceMappingURL=app.min.js.map
