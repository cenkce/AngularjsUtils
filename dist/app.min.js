!function(e){"use strict";e.module("cenkce.utils",["ng"]);e.module("cenkce.utils").service("cenkce.utils.sharer",t),t.$inject=["$q"];function t(e){var t=e;this.fbfeed=function(e,n,o,r){var i=t.defer();return FB.ui({method:"feed",link:r,picture:o,description:n,caption:e},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},this.fbshare=function(e){var n=t.defer();return FB.ui({method:"share",href:e},function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},this.twshare=function(e,t){var n="http://twitter.com/home?status="+e+" "+t,o=window.open(n,"","height=600,width=800,resizable=true,scrollbars=yes,toolbar=no,menubar=no,location=no");window.focus&&o.focus()}}e.module("cenkce.utils").factory("cenkce.utils.baseController",n),n.$inject=["$scope"];function n(e){var t=[],n=this;e.$on("$destroy",function(){n.clearEventHandlers()}),this.clearEventHandlers=function(){for(var e in t)t[e].call()},this.$on=function(e,n,o){t.push(e.$on(n,o))},this.$watch=function(e,n,o){t.push(e.$watch(n,o))}}r.$inject=["cenkce.utils.imageFileReader","$rootScope","$window","$q"];var o={imageLoaded:"cropper:image-loaded",imageSelected:"cropper:image-selected",EXIFFetched:"cropper:exif-fetched",completed:"cropper:completed",cropped:"cropper:cropped"};function r(t,n,r,i){var c=r.cropper,a=!1,u={dragMode:"move",scalable:!1,aspectRatio:1,restore:!1,minCropBoxWidth:230,checkOrientation:!1,guides:!1,toggleDragModeOnDblclick:!1,center:!1,highlight:!1,cropBoxMovable:!1,cropBoxResizable:!1},l=new Image,s=e.element("<div></div>");if("undefined"==typeof Cropper)throw new Error("Croppperjs is not found.");function d(e){a=e}this.getElement=function(){return s},this.setConfig=function(t){u=e.copy(t)},this.getConfig=function(){e.copy(u)},this.exportData=function(e,t){if(c){var n=";base64,",o={},r=new Image,i=c.getCroppedCanvas({width:e,height:t});return o.url=i.toDataURL("image/jpeg",1),r.src=o.url,o.url?(o.idx=o.url.indexOf(n),o.idx>=0&&(o.base64=o.url.substring(o.idx+n.length)),o):!1}};function p(e){var t=document.createElement("canvas");t.width=e.naturalWidth,t.height=e.naturalHeight;var n=t.getContext("2d");return n.drawImage(e,0,0),t.toDataURL()}this.zoomTo=function(e){c&&c.zoomTo(e)},this.rotate=function(e){c&&c.rotate(e)},this.getCropper=function(){return c},this.load=function(e){d(!0);var n=i.defer();if(u.cropend=function(e,t){},e.length>1)throw new Error("Multi-files are not supported");if(void 0===r.EXIF)throw new Error("exif-js cannot be found.");return t.read(e).then(function(t){if(!t[0].url)throw new Error("File data is not readable");var r=new Image;r.src=t[0].url,r.onload=function(){d(!1),l.src=p(r),l.onload=function(){console.log("completed"),s.append(l),c=new Cropper(l,{dragMode:"move",scalable:!1,aspectRatio:1,restore:!1,minCropBoxWidth:200,minCropBoxHeight:200,checkOrientation:!1,guides:!1,toggleDragModeOnDblclick:!1,center:!1,highlight:!1,cropBoxMovable:!1,cropBoxResizable:!1,cropend:function(e,t){}}),EXIF.getData(e[0],function(){switch(n.notify({message:o.EXIFFetched}),this.exifdata.Orientation){case 8:c.rotate(-90);break;case 3:c.rotate(180);break;case 6:c.rotate(90)}n.resolve()})}}}),n.promise}}i.$inject=["cenkce.utils.cropperApp"];function i(t){var n;return{restrict:"A",controller:["$scope",function(e){e.cropper={},e.cropper.zoomTo=0,e.zoom=0,e.$watch("zoom",function(e,n){console.log("zoom"),e&&t.zoomTo(e)}),e.$parent.exportCroppedData=function(e,n){return t.exportData(e,n)},e.$parent.fileBrowse=function(){console.log("browse"),n[0].click()}}],controllerAs:"cropperCtrl",scope:!0,link:function(r,i,c){n=i.find("input[type=file]"),0==n.length&&(n=e.element("<input type='file' style=\"display: none;\" >"),i.append(n)),n.bind("change",function(e){r.addPreview(t.getElement()),t.load(e.target.files).then(function(e){},function(e){},function(e){e.message==o.imageLoaded||e.message==o.completed})}),r.$on("$destroy",function(){n.unbind("change"),n=null})}}}function c(){return{requie:"?cropper",restrict:"A",link:function(e,t,n){e.addPreview=function(e){t.html(""),t.append(e)}}}}e.module("cenkce.utils").service("cenkce.utils.cropperApp",r),e.module("cenkce.utils").directive("cropper",i),e.module("cenkce.utils").directive("cropperPreview",c),e.module("cenkce.utils").service("cenkce.uitls.ga",a),a.$inject=["$window"];function a(e){var t=e.ga;this.page=function(e){t("send",{hitType:"pageview",page:e})},this.event=function(e,n,o){t("send",{hitType:"event",eventCategory:e,eventAction:n,eventLabel:o})}}e.module("cenkce.utils").service("cenkce.utils.generateUUID",u);function u(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)});return t}l.$inject=["$q"];function l(e){var t=e;this.read=function(e){for(var n,o=new FileReader,r=";base64,",i=[],c=0;n=e[c];c++){if(!n.type.match("image.*"))throw new Error("file must be image");var a=t.defer();i.push(a.promise),function(e,t){o.onload=function(n){var i={};o.readyState==FileReader.DONE&&(i.url=n.target.result,i.idx=i.url.indexOf(r),i.idx>=0&&(i.base64=i.url.substring(i.idx+r.length)),i.fileName=t.name),e.resolve(i)}}(a,n),o.readAsDataURL(n)}return t.all(i)}}e.module("cenkce.utils").service("cenkce.utils.imageFileReader",l)}(window.angular);
//# sourceMappingURL=app.min.js.map
